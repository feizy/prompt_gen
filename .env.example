# =============================================================================
# AI Agent Prompt Generator - 环境变量配置示例
# =============================================================================
#
# 使用方法：
# 1. 复制此文件为 .env
# 2. 根据您的环境修改配置项
# 3. 不要将 .env 文件提交到版本控制
#
# 快速开始：
# cp .env.example .env
# 然后编辑 .env 文件中的关键配置项
# =============================================================================

# =============================================================================
# 📊 必须配置项 (Required Configuration)
# =============================================================================

# GLM API配置 - 获取地址：https://open.bigmodel.cn/
GLM_API_KEY=your_glm_api_key_here
GLM_BASE_URL=https://open.bigmodel.cn/api/paas/v4
GLM_MODEL=glm-4

# 应用安全密钥 - 生成命令：openssl rand -hex 32
SECRET_KEY=change_this_to_a_very_secure_secret_key

# 数据库配置
DATABASE_URL=postgresql://prompt_gen_user:your_password@localhost:5432/prompt_gen
# 或者分别配置（如果不使用 DATABASE_URL）
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=prompt_gen
# DATABASE_USER=prompt_gen_user
# DATABASE_PASSWORD=your_password

# 域名配置（生产环境必须设置）
DOMAIN=your-domain.com
# 或本地开发：DOMAIN=localhost

# =============================================================================
# 🌍 环境配置 (Environment Configuration)
# =============================================================================

# 环境类型: development, production, testing
ENVIRONMENT=development

# 调试模式：生产环境必须设为 False
DEBUG=True

# 允许的主机
ALLOWED_HOSTS=["localhost", "127.0.0.1"]

# CORS配置：允许的前端域名
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# =============================================================================
# 🗄️ 数据库配置 (Database Configuration)
# =============================================================================

# 数据库连接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# 🔌 Redis配置 (Redis Configuration) - 可选
# =============================================================================

# Redis连接URL（如果使用Redis缓存）
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=              # Redis密码（如果设置了密码）
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# 🔒 安全配置 (Security Configuration)
# =============================================================================

# JWT配置
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS安全配置
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# 安全头配置
SECURE_SSL_REDIRECT=False          # 生产环境设为 True
SECURE_HSTS_SECONDS=0              # 生产环境设为 31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=False
SECURE_HSTS_PRELOAD=False
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
X_FRAME_OPTIONS=DENY

# =============================================================================
# 📡 WebSocket配置 (WebSocket Configuration)
# =============================================================================

# WebSocket连接配置
WS_HEARTBEAT_INTERVAL=30
WS_CONNECTION_TIMEOUT=300
WS_MAX_CONNECTIONS=1000
WS_MESSAGE_QUEUE_SIZE=1000

# =============================================================================
# 🚀 性能配置 (Performance Configuration)
# =============================================================================

# 工作进程配置
WORKERS=1                          # 开发环境: 1, 生产环境: CPU核心数
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65

# 会话配置
MAX_CONCURRENT_SESSIONS=100        # 最大并发会话数
SESSION_TIMEOUT_MINUTES=30         # 会话超时时间（分钟）
AGENT_TIMEOUT_SECONDS=30           # 代理超时时间（秒）
MAX_ITERATIONS=5                   # 最大迭代次数

# 请求限制
MAX_REQUESTS=1000                  # 每个工作进程的最大请求数
MAX_REQUESTS_JITTER=100            # 请求抖动
RATE_LIMIT_REQUESTS=100            # 速率限制：请求数
RATE_LIMIT_WINDOW=3600             # 速率限制：时间窗口（秒）

# =============================================================================
# 📝 日志配置 (Logging Configuration)
# =============================================================================

# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志格式: json, text
LOG_FORMAT=json

# 日志文件配置
LOG_FILE=logs/app.log
LOG_MAX_BYTES=10485760              # 10MB
LOG_BACKUP_COUNT=5

# 日志输出
LOG_TO_CONSOLE=True
LOG_TO_FILE=True

# =============================================================================
# 📊 监控配置 (Monitoring Configuration) - 可选
# =============================================================================

# Prometheus监控
PROMETHEUS_ENABLED=False
PROMETHEUS_PORT=9090

# Grafana仪表板
GRAFANA_ENABLED=False
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Sentry错误追踪
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# 📧 邮件配置 (Email Configuration) - 可选
# =============================================================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=True
SMTP_SSL=False
EMAIL_FROM=noreply@your-domain.com
EMAIL_FROM_NAME=AI Agent Prompt Generator

# =============================================================================
# 📁 文件存储配置 (File Storage Configuration) - 可选
# =============================================================================

# 文件上传配置
UPLOAD_PATH=uploads/
MAX_FILE_SIZE=10485760              # 10MB
ALLOWED_EXTENSIONS=[".txt", ".pdf", ".doc", ".docx", ".md"]

# 静态文件配置
STATIC_PATH=static/
MEDIA_PATH=media/

# =============================================================================
# 🧪 缓存配置 (Cache Configuration)
# =============================================================================

# 缓存配置
CACHE_ENABLED=True
CACHE_DEFAULT_TIMEOUT=3600          # 默认缓存时间（秒）
CACHE_KEY_PREFIX=prompt_gen
CACHE_VERSION=1

# =============================================================================
# 🎛️ 特性开关 (Feature Flags)
# =============================================================================

# 功能开关
ENABLE_ANALYTICS=False              # 启用分析统计
ENABLE_USER_REGISTRATION=False       # 启用用户注册
ENABLE_RATE_LIMITING=True           # 启用速率限制
ENABLE_CACHING=True                 # 启用缓存
ENABLE_MONITORING=False             # 启用监控
ENABLE_WEBSOCKET=True               # 启用WebSocket
ENABLE_EMAIL_NOTIFICATIONS=False     # 启用邮件通知

# 实验性功能
ENABLE_BETA_FEATURES=False
ENABLE_EXPERIMENTAL_AGENTS=False

# =============================================================================
# 🌐 外部服务配置 (External Services) - 可选
# =============================================================================

# OpenAI API（备用）
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4

# Google服务
GOOGLE_ANALYTICS_ID=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Stripe支付
STRIPE_PUBLIC_KEY=pk_test_xxxxxxxxxxxxxx
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=

# AWS S3（文件存储）
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-west-2
AWS_S3_BUCKET=your-bucket-name

# =============================================================================
# 🔧 开发工具配置 (Development Tools)
# =============================================================================

# 开发服务器配置
HOST=0.0.0.0
PORT=8000
RELOAD=True

# API文档
API_DOCS_ENABLED=True
API_DOCS_URL=/docs

# 调试工具
PROFILING_ENABLED=False
SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# 📦 Docker配置 (Docker Configuration)
# =============================================================================

# Docker内部配置
CONTAINER_NAME=prompt_gen_backend
CONTAINER_HOSTNAME=prompt_gen

# 健康检查
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 🧪 测试配置 (Testing Configuration)
# =============================================================================

# 测试数据库
TEST_DATABASE_URL=postgresql://prompt_gen_user:test_password@localhost:5432/prompt_gen_test

# 测试配置
TESTING=True
TEST_LOG_LEVEL=WARNING
TEST_ASYNC_TIMEOUT=30

# 测试数据
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=testpassword123

# =============================================================================
# 🚨 生产环境特定配置 (Production Only)
# =============================================================================

# 生产环境安全配置
PRODUCTION_SECURITY=True
FORCE_HTTPS=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# 备份配置
BACKUP_ENABLED=True
BACKUP_SCHEDULE="0 2 * * *"        # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=True

# 性能优化
PRODUCTION_WORKERS=4
PRODUCTION_MEMORY_LIMIT="1G"
PRODUCTION_CPU_LIMIT="1.0"

# =============================================================================
# 💡 环境特定配置示例 (Environment-Specific Examples)
# =============================================================================

# === 开发环境示例 (.env.development) ===
# DEBUG=True
# LOG_LEVEL=DEBUG
# WORKERS=1
# ALLOWED_HOSTS=["localhost", "127.0.0.1"]
# CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]
# RELOAD=True
# PROMETHEUS_ENABLED=False

# === 生产环境示例 (.env.production) ===
# DEBUG=False
# LOG_LEVEL=INFO
# WORKERS=4
# ALLOWED_HOSTS=["your-domain.com", "www.your-domain.com"]
# CORS_ORIGINS=["https://your-domain.com", "https://www.your-domain.com"]
# SECURE_SSL_REDIRECT=True
# PROMETHEUS_ENABLED=True

# === 测试环境示例 (.env.test) ===
# DEBUG=False
# LOG_LEVEL=WARNING
# WORKERS=1
# DATABASE_URL=postgresql://test:test@localhost/prompt_gen_test
# TESTING=True
# CACHE_ENABLED=False

# =============================================================================
# 📋 快速配置检查清单 (Quick Setup Checklist)
# =============================================================================

# 🔴 必须配置：
# □ GLM_API_KEY - 设置您的GLM API密钥
# □ SECRET_KEY - 生成并设置安全密钥
# □ DATABASE_URL - 配置数据库连接
# □ DOMAIN - 设置您的域名

# 🟡 推荐配置：
# □ REDIS_URL - 配置Redis（提升性能）
# □ ENVIRONMENT - 设置正确的环境类型
# □ LOG_LEVEL - 设置合适的日志级别
# □ WORKERS - 根据CPU核心数调整工作进程

# 🟢 可选配置：
# □ 邮件配置 - 如需邮件通知功能
# □ 监控配置 - 如需监控和告警
# □ 第三方服务 - 根据需要配置
# □ 文件存储 - 如需文件上传功能

# =============================================================================
# 🔒 安全提醒 (Security Notes)
# =============================================================================

# 1. 永远不要将 .env 文件提交到版本控制系统
# 2. 生产环境必须使用强密码和随机密钥
# 3. 定期更换API密钥和密码
# 4. 使用不同的密钥用于不同环境
# 5. 限制 .env 文件的访问权限：chmod 600 .env
# 6. 定期审查和更新配置
# 7. 使用环境变量管理敏感信息

# =============================================================================
# 🆘 获取帮助 (Getting Help)
# =============================================================================

# 文档：
# - 部署指南：DEPLOYMENT.md
# - 测试指南：TESTING.md
# - 配置指南：ENV_CONFIG_GUIDE.md

# 命令：
# - 生成密钥：openssl rand -hex 32
# - 检查配置：python system_validation.py
# - 运行测试：pytest

# 支持：
# - GitHub Issues：https://github.com/feizy/prompt_gen/issues
# - 文档：查看项目README.md